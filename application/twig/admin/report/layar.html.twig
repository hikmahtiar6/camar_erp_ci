<!DOCTYPE html>
<html>
	<head>
		<title>View Reporting</title>
	</head>
    <link href="{{ base_url('web/vendor/bootstrap/dist/css/bootstrap.min.css') }}" rel="stylesheet">
    <style type="text/css">
	     @media print{@page {size: landscape}}
	</style>

	<body>

		<div class="row">
		</div>
			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 alert alert-info button-action">
				<button class="btn btn-primary report-print">Print</button>
				<button class="btn btn-danger report-close">Tutup</button>
			</div>

			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 table-responsive">

				<table style="width: 80%">
					<tr>
						<td valign="bottom">
							<h2>
								Time Sheet
							</h2>
						</td>

						<td valign="bottom">
							<h2>
								SN1150.01
							</h2>
						</td>

						<td valign="bottom">
							<h2>
								Week 47
							</h2>
						</td>

						<td valign="bottom">
							<h4>
								Recovery Total: ###
							</h4>
						</td>
					</tr>
				</table>

				<br>

				<table border="0" style="width: 100%">
					<tr>
						<th width="200">Std Jam Kerja:</th>
						<th width="150">720 mnt</th>
						<th width="300" style="text-align: right;">Total pemakaian billet (kg):</th>
						<th width="100" style="padding-left: 15px;">51,363 kg</th>
						<th width="150" style="text-align: right;">Berat scrap:</th>
						<th width="100" style="padding-left: 10px;">5,517 kg</th>
						<th width="100" style="text-align: right;">Loss (kg):</th>
						<th width="100" style="padding-left: 15px;">552 kg</th>
					</tr>
					<tr>
						<th>Jam Produktif:</th>
						<th>(228) mnt</th>
						<th style="text-align: right;">Total hasil produksi (kg):</th>
						<th style="padding-left: 15px;">42,774 kg</th>
						<th style="text-align: right;">Berat end-butt:</th>
						<th style="padding-left: 15px;">2,520 kg</th>
						<th style="text-align: right;">Loss (%):</th>
						<th style="padding-left: 15px;">1.08%</th>

					</tr>
					<tr>
						<th>Jam non-efektif:</th>
						<th>948 mnt(131.7%)</th>
					</tr>
				</table>

								
				


				<br>

				<table class="table table-bordered table-striped">
					<thead>
						<tr>
							<th style="vertical-align: middle;">No.</th>
							<th style="vertical-align: middle;">Tanggal</th>
							<th style="vertical-align: middle;">Shift</th>
							<th style="vertical-align: middle;">Section Id</th>
							<th style="vertical-align: middle;">Section Name</th>
							<th style="vertical-align: middle;">Mesin</th>
							<th style="vertical-align: middle;">Billet Id</th>
							<th style="vertical-align: middle;">Len (m)</th>
							<th style="vertical-align: middle;">Finishing</th>
							<th style="vertical-align: middle;">
								Target Prod <br>
								(Billet)
							</th>
							<!--<th style="vertical-align: middle;">Day</th>
							<th style="vertical-align: middle;">No. Lot</th>-->
							<th style="vertical-align: middle;">Index Dice</th>
							<th style="vertical-align: middle;">PPIC Note</th>
							<th style="vertical-align: middle;">
								Target Prod <br>
								(BTG)
							</th>
							<th style="vertical-align: middle;">
								Berat Std <br>
								(kg/m) 
							</th>
							<th style="vertical-align: middle;">
								Target Section <br>
								(kg)
							</th>
							<th style="vertical-align: middle;">
								Total Target <br>
								(kg)
							</th>
							<th style="vertical-align: middle;">Die Type</th>
							<th style="vertical-align: middle;">Pressure Time/Billet</th>
							<th style="vertical-align: middle;">EstStart</th>
							<th style="vertical-align: middle;">EstEnd</th>
							<th style="vertical-align: middle;">EstDiesPrep</th>

							<!--<th style="vertical-align: middle;">Berat Aktual/m</th>
							<th style="vertical-align: middle;">Pemakaian Billet <br> (kg)</th>
							<th style="vertical-align: middle;">Pakai Billet <br>(m)</th>
							<th style="vertical-align: middle;">Start</th>
							<th style="vertical-align: middle;">Finish</th>
							<th style="vertical-align: middle;">Hasil Prod <br> (BTG)</th>
							<th style="vertical-align: middle;">Hasil Prod <br> (KG)</th>
							<th style="vertical-align: middle;">Ram speed</th>
							<th style="vertical-align: middle;">Pressure</th>
							<th style="vertical-align: middle;">Recovery</th>
							<th style="vertical-align: middle;">Keterangan</th>
							<th style="vertical-align: middle;">Dead Cycle</th>
							<th style="vertical-align: middle;">Diez Cycle <br> (x)</th>
							<th style="vertical-align: middle;">Diez Cycle</th>
							<th style="vertical-align: middle;">Down Time</th>
							<th style="vertical-align: middle;">Total Pemak <br> Billet Hari Ini</th>
							<th style="vertical-align: middle;">Hasil Prod <br> Hari Ini</th>
							<th style="vertical-align: middle;">Recovery <br> 2</th>
							<th style="vertical-align: middle;">Achieve</th>
							<th style="vertical-align: middle;">Aktual Billet <br> (BTG)</th>
							<th style="vertical-align: middle;">Oprt</th>
							<th style="vertical-align: middle;">Berat Scrap</th>
							<th style="vertical-align: middle;">Berat End-Butt</th>
							<th style="vertical-align: middle;">Loss</th>
							<th style="vertical-align: middle;">Loss %</th>
							<th style="vertical-align: middle;">x</th>
							<th style="vertical-align: middle;">Show?</th>
							<th style="vertical-align: middle;">Section Name</th>
							<th style="vertical-align: middle;">Code</th>
							<th style="vertical-align: middle;">Manuf Thick</th>
							<th style="vertical-align: middle;">Tol</th>
							<th style="vertical-align: middle;">Hole</th>
							<th style="vertical-align: middle;">Bolster</th>
							<th style="vertical-align: middle;">Puller Awal</th>
							<th style="vertical-align: middle;">BS Blkg</th>
							<th style="vertical-align: middle;">PTarik</th>
							<th style="vertical-align: middle;">HJadi</th>
							<th style="vertical-align: middle;">BltMax</th>
							<th style="vertical-align: middle;">BltVen</th>
							<th style="vertical-align: middle;">FrekBlt</th>
							<th style="vertical-align: middle;">FrekPot</th>
							<th style="vertical-align: middle;">SecName</th>
							<th style="vertical-align: middle;">FJadiBTG</th>
							-->

						</tr>
					</thead>

					<tbody>
						{% if search_data %}
						{% for no, row_data in search_data %}

						{% set total_btg = row_data.WeightStandard * row_data.target_prod * row_data.Length %}
						{% set total_btg_arr = [] %}
						{% set total_btg_arr = total_btg_arr|merge([total_btg]) %}

						{% set target_btg = row_data.target_prod %}
						{% if row_data.f2_estfg != '' %}
							{% set target_btg = row_data.f2_estfg * row_data.target_prod %}
						{% endif %}

						<tr>
							<td>{{ no + 1 }}.</td>
							<td>{{ row_data.tanggal|date('D, j/M/y') }}</td>
							<td>{{ row_data.shift }}</td>
							<td>{{ row_data.section_id }}</td>
							<td>{{ row_data.SectionDescription }}</td>
							<td>{{ row_data.machine_type_id }}</td>
							<td>{{ row_data.billet_type_id }}</td>
							<td>{{ row_data.Length }}</td>
							<td>{{ row_data.finishing_name }}</td>
							<td>{{ row_data.target_prod }}</td>
							<td>{{ row_data.index_dice }}</td>
							<td>{{ row_data.ppic_note }}</td>
							<td>{{ target_btg }}</td>
							<td>{{ row_data.WeightStandard }}</td>
							<td>{{ row_data.WeightStandard * row_data.target_prod * row_data.Length }}</td>
							
							<td>{{ arr_sum(total_btg_arr) }}</td>

							<td>{{ row_data.DieTypeId }}</td>
							<td>{{ row_data.actual_pressure_time }}</td>
							<td>{{ row_data.ShiftStart|date('H:i:s') }}</td>
							<td>{{ get_shift_end(row_data.ShiftStart, row_data.actual_pressure_time, row_data.target_prod) }}</td>
							<td>-</td>

							<!--
							<td>{{ row_data.hari_ke }}</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							-->
						</tr>
						{% endfor %}
						{% else %}
						<tr>
							<td colspan="65"> Data tidak tersedia.</td>
						</tr>
						{% endif %}
					</tbody>
			</table>

		</div>

		

	</body>

    <script src="{{ base_url('web/vendor/jquery/dist/jquery.min.js') }}"></script>
    <script src="{{ base_url('web/vendor/bootstrap/dist/js/bootstrap.min.js') }}"></script>

    <script type="text/javascript">
	    $(document).ready(function() {
			$('.report-print').click(function() {
				window.print();
				return false;
			});
			$('.report-close').click(function() {
				window.close();
				return false;
			});
	    });

	    /**
		 * function detect windows print
		 */

		var beforePrint = function() {
			$('.button-action').hide();
		};
		var afterPrint = function() {
			$('.button-action').show();
		};

		if (window.matchMedia) {
			var mediaQueryList = window.matchMedia('print');
			mediaQueryList.addListener(function(mql) {
			    if (mql.matches) {
			        beforePrint();
			    } else {
			        afterPrint();
			    }
			});
		}

		window.onbeforeprint = beforePrint;
		window.onafterprint = afterPrint;

	</script>



</html>